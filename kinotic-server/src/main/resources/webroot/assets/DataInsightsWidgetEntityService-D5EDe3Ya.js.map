{"version":3,"file":"DataInsightsWidgetEntityService-D5EDe3Ya.js","sources":["../../src/domain/DataInsightsWidget.ts","../../src/services/generated/BaseDataInsightsWidgetEntityService.ts","../../src/services/DataInsightsWidgetEntityService.ts"],"sourcesContent":["import type {DataInsightsComponent} from './DataInsightsComponent.js'\nimport { AutoGeneratedId, Entity, MultiTenancyType, NotIndexed } from \"@kinotic/structures-api\"\n\n@Entity(MultiTenancyType.SHARED)\nexport class DataInsightsWidget {\n    @AutoGeneratedId\n    public id: string | null = null\n    public applicationId!: string\n    @NotIndexed\n    public dataInsightsComponent!: DataInsightsComponent\n    public dashboardId?: string // Optional reference to dashboard\n    public created!: Date\n    public updated!: Date\n}","import { EntityService, type IEntitiesService } from '@kinotic/structures-api'\nimport { DataInsightsWidget } from '../../domain/DataInsightsWidget.js'\n\n\n/**\n * Base Service for interacting with DataInsightsWidget entities\n * This class was generated by the Structures CLI. And will be overwritten if the CLI is run again.\n */\nexport class BaseDataInsightsWidgetEntityService extends EntityService<DataInsightsWidget> {\n\n  private readonly shouldValidate: boolean\n\n  constructor(shouldValidate: boolean = true, entitiesService?: IEntitiesService) {\n    super('structures__system', 'DataInsightsWidget', entitiesService)\n    this.shouldValidate = shouldValidate\n  }\n\n  protected async beforeSaveOrUpdate(entity: DataInsightsWidget): Promise<DataInsightsWidget> {\n    if (this.shouldValidate) {\n      return this.validate(entity)\n    } else {\n      return entity\n    }\n  }\n\n  protected async beforeBulkSaveOrUpdate(entities: DataInsightsWidget[]): Promise<DataInsightsWidget[]> {\n    if (this.shouldValidate) {\n      const validatedEntities: DataInsightsWidget[] = []\n      for (let entity of entities) {\n        validatedEntities.push(this.validate(entity))\n      }\n      return validatedEntities\n    } else {\n      return entities\n    }\n  }\n\n  validate(entity: DataInsightsWidget): DataInsightsWidget {\n    let ret: any\n    if (entity) {\n      ret = (ret ? ret : {})\n      ret.id = entity.id\n      ret.applicationId = entity.applicationId\n      if (entity.dataInsightsComponent) {\n        ret.dataInsightsComponent = (ret.dataInsightsComponent ? ret.dataInsightsComponent : {})\n        ret.dataInsightsComponent.id = entity.dataInsightsComponent.id\n        ret.dataInsightsComponent.name = entity.dataInsightsComponent.name\n        ret.dataInsightsComponent.description = entity.dataInsightsComponent.description\n        ret.dataInsightsComponent.modifiedAt = entity.dataInsightsComponent.modifiedAt\n        ret.dataInsightsComponent.rawHtml = entity.dataInsightsComponent.rawHtml\n        ret.dataInsightsComponent.applicationId = entity.dataInsightsComponent.applicationId\n        ret.dataInsightsComponent.supportsDateRangeFiltering = entity.dataInsightsComponent.supportsDateRangeFiltering\n      }\n      ret.dashboardId = entity.dashboardId\n      ret.created = entity.created\n      ret.updated = entity.updated\n    }\n\n    return ret\n  }\n\n}\n","import { type IEntitiesService } from '@kinotic/structures-api'\nimport { Pageable } from '@kinotic/continuum-client'\nimport { BaseDataInsightsWidgetEntityService } from './generated/BaseDataInsightsWidgetEntityService.js'\nimport { DataInsightsWidget } from '@/domain/DataInsightsWidget'\n\n/**\n * Service for interacting with DataInsightsWidget entities\n * This class was generated by the structures cli\n */\nexport class DataInsightsWidgetEntityService extends BaseDataInsightsWidgetEntityService {\n\n  constructor(entitiesService?: IEntitiesService) {\n    super(false, entitiesService)\n  }\n\n  async findByApplicationId(applicationId: string): Promise<DataInsightsWidget[]> {\n    const pageable = Pageable.create(0, 1000)\n    const result = await this.findAll(pageable)\n    \n    if (!result.content) {\n      return []\n    }\n    \n    const filtered = result.content.filter((widget: DataInsightsWidget) => {\n      return widget.applicationId === applicationId\n    })\n    \n    return filtered\n  }\n\n}\n"],"names":["DataInsightsWidget","__publicField","__decorateClass","AutoGeneratedId","NotIndexed","Entity","MultiTenancyType","BaseDataInsightsWidgetEntityService","EntityService","shouldValidate","entitiesService","entity","entities","validatedEntities","ret","DataInsightsWidgetEntityService","applicationId","pageable","Pageable","result","widget"],"mappings":"0aAIO,IAAMA,EAAN,KAAyB,CAAzB,cAEIC,EAAA,UAAoB,MACpBA,EAAA,sBAEAA,EAAA,8BACAA,EAAA,oBACAA,EAAA,gBACAA,EAAA,gBACX,EAPWC,EAAA,CADNC,CAAA,EADQH,EAEF,UAAA,KAAA,CAAA,EAGAE,EAAA,CADNE,CAAA,EAJQJ,EAKF,UAAA,wBAAA,CAAA,EALEA,EAANE,EAAA,CADNG,EAAOC,EAAiB,MAAM,CAAA,EAClBN,CAAA,ECIN,MAAMO,UAA4CC,CAAkC,CAIzF,YAAYC,EAA0B,GAAMC,EAAoC,CACxE,MAAA,qBAAsB,qBAAsBA,CAAe,EAHlDT,EAAA,uBAIf,KAAK,eAAiBQ,CAAA,CAGxB,MAAgB,mBAAmBE,EAAyD,CAC1F,OAAI,KAAK,eACA,KAAK,SAASA,CAAM,EAEpBA,CACT,CAGF,MAAgB,uBAAuBC,EAA+D,CACpG,GAAI,KAAK,eAAgB,CACvB,MAAMC,EAA0C,CAAC,EACjD,QAASF,KAAUC,EACjBC,EAAkB,KAAK,KAAK,SAASF,CAAM,CAAC,EAEvC,OAAAE,CAAA,KAEA,QAAAD,CACT,CAGF,SAASD,EAAgD,CACnD,IAAAG,EACJ,OAAIH,IACKG,EAAAA,GAAY,CAAC,EACpBA,EAAI,GAAKH,EAAO,GAChBG,EAAI,cAAgBH,EAAO,cACvBA,EAAO,wBACTG,EAAI,sBAAyBA,EAAI,sBAAwBA,EAAI,sBAAwB,CAAC,EAClFA,EAAA,sBAAsB,GAAKH,EAAO,sBAAsB,GACxDG,EAAA,sBAAsB,KAAOH,EAAO,sBAAsB,KAC1DG,EAAA,sBAAsB,YAAcH,EAAO,sBAAsB,YACjEG,EAAA,sBAAsB,WAAaH,EAAO,sBAAsB,WAChEG,EAAA,sBAAsB,QAAUH,EAAO,sBAAsB,QAC7DG,EAAA,sBAAsB,cAAgBH,EAAO,sBAAsB,cACnEG,EAAA,sBAAsB,2BAA6BH,EAAO,sBAAsB,4BAEtFG,EAAI,YAAcH,EAAO,YACzBG,EAAI,QAAUH,EAAO,QACrBG,EAAI,QAAUH,EAAO,SAGhBG,CAAA,CAGX,CCpDO,MAAMC,UAAwCR,CAAoC,CAEvF,YAAYG,EAAoC,CAC9C,MAAM,GAAOA,CAAe,CAAA,CAG9B,MAAM,oBAAoBM,EAAsD,CAC9E,MAAMC,EAAWC,EAAS,OAAO,EAAG,GAAI,EAClCC,EAAS,MAAM,KAAK,QAAQF,CAAQ,EAEtC,OAACE,EAAO,QAIKA,EAAO,QAAQ,OAAQC,GAC/BA,EAAO,gBAAkBJ,CACjC,EALQ,CAAC,CAOH,CAGX"}
import{d as N,g as V,u as $,i as p,j as L,H as E,c as r,a as t,e as n,b as S,k as T,w as f,m as d,t as j,F as A,C as O,o as l}from"./index-D4TKg6Qf.js";import{D as U}from"./DataInsightsWidgetEntityService-D5EDe3Ya.js";import{S as H}from"./SavedWidgetItem-DRn6fR6H.js";import{s as M}from"./index-C6UZc7hI.js";import{s as g}from"./index-9qJBPOsq.js";import{s as q}from"./index-BAOkBHjZ.js";import{s as z}from"./index-CJ6tXHN-.js";import{s as G}from"./index-CWmb5psA.js";import"./index-DZCvATne.js";const J={class:"saved-widgets-page p-4"},K={key:0,class:"flex justify-center py-12"},P={key:1,class:"text-center py-12"},Q={key:2,class:""},R={class:"mb-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3"},X={class:"w-full sm:w-auto flex items-center gap-2"},Y={key:0,class:"text-center py-12"},Z={class:"text-surface-500"},ee={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},ue=N({__name:"SavedWidgets",props:{applicationId:{}},setup(W){const y=V("saved-widgets"),x=W,v=$(),w=new U,o=p([]),m=p(!1),u=p(!1),c=p(null),i=p(""),I=async()=>{if(!x.applicationId){o.value=[];return}m.value=!0;try{const s=await w.findByApplicationId(x.applicationId);o.value=s}catch(s){y("Failed to load saved widgets: %O",s),v.add({severity:"error",summary:"Error",detail:"Failed to load saved widgets",life:3e3})}finally{m.value=!1}},_=s=>{c.value=s,u.value=!0},B=async()=>{if(c.value)try{await w.deleteById(c.value),o.value=o.value.filter(s=>s.id!==c.value),v.add({severity:"success",summary:"Success",detail:"Widget deleted successfully",life:3e3})}catch(s){y("Failed to delete widget: %O",s),v.add({severity:"error",summary:"Error",detail:"Failed to delete widget",life:3e3})}finally{u.value=!1,c.value=null}},b=L(()=>{if(!i.value)return o.value;const s=i.value.toLowerCase();return o.value.filter(e=>{var h,k,C,D;const a=((k=(h=e.dataInsightsComponent)==null?void 0:h.name)==null?void 0:k.toLowerCase())||"",F=((D=(C=e.dataInsightsComponent)==null?void 0:C.description)==null?void 0:D.toLowerCase())||"";return a.includes(s)||F.includes(s)})});return E(()=>{I()}),(s,e)=>(l(),r("div",J,[e[9]||(e[9]=t("h1",{class:"text-2xl font-semibold mb-4"},"Saved Widgets",-1)),m.value?(l(),r("div",K,e[4]||(e[4]=[t("i",{class:"pi pi-spin pi-spinner text-3xl text-primary-500"},null,-1)]))):o.value.length===0?(l(),r("div",P,e[5]||(e[5]=[t("div",{class:"mb-4"},[t("i",{class:"pi pi-chart-bar text-6xl text-surface-300"})],-1),t("h3",{class:"text-lg font-semibold text-surface-800 mb-2"},"No saved widgets yet",-1),t("p",{class:"text-surface-500"}," Create data insights in the Data Insights page to save widgets here. ",-1)]))):(l(),r("div",Q,[t("div",R,[t("div",X,[n(d(M),{"icon-position":"left",class:"w-full sm:w-80"},{default:f(()=>[n(d(z),{class:"pi pi-search"}),n(d(G),{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),placeholder:"Search widgets...",class:"w-full"},null,8,["modelValue"])]),_:1}),i.value?(l(),S(d(g),{key:0,icon:"pi pi-times",severity:"secondary",text:"",rounded:"",onClick:e[1]||(e[1]=a=>i.value=""),"aria-label":"Clear search"})):T("",!0)])]),b.value.length===0&&i.value?(l(),r("div",Y,[e[6]||(e[6]=t("div",{class:"mb-4"},[t("i",{class:"pi pi-search text-4xl text-surface-300"})],-1)),e[7]||(e[7]=t("h3",{class:"text-lg font-semibold text-surface-800 mb-2"},"No widgets found",-1)),t("p",Z,' No widgets match your search "'+j(i.value)+'" ',1)])):(l(),r("div",ee,[(l(!0),r(A,null,O(b.value,a=>(l(),S(H,{key:a.id||"unknown",widget:a,onDelete:_},null,8,["widget"]))),128))]))])),n(d(q),{visible:u.value,"onUpdate:visible":e[3]||(e[3]=a=>u.value=a),modal:"",header:"Delete Widget",style:{width:"450px"}},{footer:f(()=>[n(d(g),{label:"Cancel",severity:"secondary",onClick:e[2]||(e[2]=a=>u.value=!1)}),n(d(g),{label:"Delete",severity:"danger",onClick:B})]),default:f(()=>[e[8]||(e[8]=t("div",{class:"flex items-start gap-3"},[t("i",{class:"pi pi-exclamation-triangle text-3xl text-orange-500"}),t("div",null,[t("p",{class:"text-surface-700"}," Are you sure you want to delete this widget? This action cannot be undone. ")])],-1))]),_:1,__:[8]},8,["visible"])]))}});export{ue as default};
//# sourceMappingURL=SavedWidgets-CDmnAk8V.js.map

import{d as K,u as R,i as o,p as A,H as X,A as r,j as Y,c as p,a as t,e as i,w as n,m as a,D as B,y as W,z as F,l as e2,b as U,k as t2,t as l2,F as s2,C as a2,o as d,n as i2}from"./index-D4TKg6Qf.js";import{_ as o2,s as k,a as n2}from"./index-D8QaaHXm.js";import{D as r2}from"./DataInsightsWidgetEntityService-D5EDe3Ya.js";import{S as d2}from"./SavedWidgetItem-DRn6fR6H.js";import{d as u2,c as c2,b as j,a as p2,s as G}from"./index-BQa7Ulp-.js";import{s as v2}from"./index-BAOkBHjZ.js";import{s as Q}from"./index-CWmb5psA.js";import{s as f2}from"./index-CrgtV0Gs.js";import{s as L}from"./index-9qJBPOsq.js";import{s as m2}from"./index-C6UZc7hI.js";import{s as C2}from"./index-CJ6tXHN-.js";import"./index-DSzTE1kE.js";import"./index-CtZrQ-ru.js";import"./index-DZCvATne.js";const g2="data:image/svg+xml,%3csvg%20width='25'%20height='25'%20viewBox='0%200%2025%2025'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M15.3498%205.08353C14.9765%204.72017%2014.4761%204.51686%2013.9551%204.51686C13.4341%204.51686%2012.9337%204.72017%2012.5603%205.08353L5.12215%2012.378C4.99768%2012.499%204.83094%2012.5666%204.65736%2012.5666C4.48378%2012.5666%204.31704%2012.499%204.19257%2012.378C4.13163%2012.3187%204.08319%2012.2478%204.05012%2012.1695C4.01704%2012.0912%204%2012.0071%204%2011.9221C4%2011.8371%204.01704%2011.7529%204.05012%2011.6746C4.08319%2011.5963%204.13163%2011.5254%204.19257%2011.4662L11.6307%204.17172C12.2529%203.56622%2013.0869%203.22742%2013.9551%203.22742C14.8233%203.22742%2015.6572%203.56622%2016.2794%204.17172C16.6394%204.52185%2016.9114%204.95224%2017.0731%205.42769C17.2348%205.90314%2017.2817%206.41012%2017.2098%206.90714C17.7134%206.83551%2018.2267%206.88048%2018.7102%207.03856C19.1937%207.19665%2019.6345%207.46363%2019.9985%207.81895L20.0371%207.85758C20.3418%208.15391%2020.584%208.50831%2020.7494%208.89984C20.9148%209.29136%2021%209.71208%2021%2010.1371C21%2010.5621%2020.9148%2010.9828%2020.7494%2011.3744C20.584%2011.7659%2020.3418%2012.1203%2020.0371%2012.4166L13.3099%2019.0133C13.2896%2019.033%2013.2734%2019.0566%2013.2624%2019.0827C13.2514%2019.1088%2013.2457%2019.1368%2013.2457%2019.1651C13.2457%2019.1935%2013.2514%2019.2215%2013.2624%2019.2476C13.2734%2019.2736%2013.2896%2019.2972%2013.3099%2019.317L14.6915%2020.6723C14.7524%2020.7316%2014.8009%2020.8025%2014.8339%2020.8808C14.867%2020.9591%2014.8841%2021.0432%2014.8841%2021.1282C14.8841%2021.2132%2014.867%2021.2974%2014.8339%2021.3757C14.8009%2021.454%2014.7524%2021.5249%2014.6915%2021.5841C14.567%2021.7051%2014.4003%2021.7728%2014.2267%2021.7728C14.0531%2021.7728%2013.8864%2021.7051%2013.7619%2021.5841L12.3803%2020.2296C12.238%2020.0913%2012.1249%2019.9259%2012.0476%2019.7431C11.9704%2019.5603%2011.9306%2019.3639%2011.9306%2019.1655C11.9306%2018.9671%2011.9704%2018.7707%2012.0476%2018.5879C12.1249%2018.4052%2012.238%2018.2398%2012.3803%2018.1015L19.1076%2011.504C19.2903%2011.3262%2019.4355%2011.1135%2019.5347%2010.8786C19.6338%2010.6437%2019.6849%2010.3913%2019.6849%2010.1363C19.6849%209.88134%2019.6338%209.62894%2019.5347%209.39403C19.4355%209.15912%2019.2903%208.94647%2019.1076%208.76862L19.0689%208.73075C18.696%208.36778%2018.1962%208.16448%2017.6758%208.16405C17.1554%208.16362%2016.6553%208.36608%2016.2817%208.72844L10.7398%2014.1637L10.7383%2014.1653L10.6625%2014.2402C10.538%2014.3614%2010.3711%2014.4293%2010.1974%2014.4293C10.0236%2014.4293%209.85669%2014.3614%209.73218%2014.2402C9.67124%2014.181%209.6228%2014.1101%209.58973%2014.0318C9.55665%2013.9535%209.53961%2013.8693%209.53961%2013.7843C9.53961%2013.6993%209.55665%2013.6152%209.58973%2013.5369C9.6228%2013.4586%209.67124%2013.3877%209.73218%2013.3284L15.3522%207.81663C15.5344%207.63866%2015.6791%207.42603%2015.7779%207.19125C15.8766%206.95647%2015.9274%206.7043%2015.9272%206.44959C15.927%206.19489%2015.8758%205.9428%2015.7766%205.70819C15.6775%205.47358%2015.5324%205.26119%2015.3498%205.08353Z'%20fill='black'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M14.4202%206.90706C14.4812%206.8478%2014.5296%206.77692%2014.5627%206.69861C14.5958%206.6203%2014.6128%206.53616%2014.6128%206.45116C14.6128%206.36615%2014.5958%206.28201%2014.5627%206.2037C14.5296%206.1254%2014.4812%206.05452%2014.4202%205.99525C14.2957%205.87404%2014.1288%205.80621%2013.9551%205.80621C13.7813%205.80621%2013.6144%205.87404%2013.4899%205.99525L7.98893%2011.3904C7.68423%2011.6867%207.44203%2012.0411%207.27665%2012.4326C7.11127%2012.8241%207.02606%2013.2449%207.02606%2013.6699C7.02606%2014.0949%207.11127%2014.5156%207.27665%2014.9071C7.44203%2015.2987%207.68423%2015.6531%207.98893%2015.9494C8.61122%2016.5547%209.44512%2016.8934%2010.3133%2016.8934C11.1814%2016.8934%2012.0153%2016.5547%2012.6376%2015.9494L18.1393%2010.5543C18.2003%2010.495%2018.2487%2010.4241%2018.2818%2010.3458C18.3149%2010.2675%2018.3319%2010.1834%2018.3319%2010.0984C18.3319%2010.0134%2018.3149%209.92923%2018.2818%209.85093C18.2487%209.77262%2018.2003%209.70174%2018.1393%209.64248C18.0148%209.52126%2017.8479%209.45344%2017.6742%209.45344C17.5004%209.45344%2017.3335%209.52126%2017.209%209.64248L11.708%2015.0376C11.3347%2015.4009%2010.8342%2015.6043%2010.3133%2015.6043C9.79228%2015.6043%209.29186%2015.4009%208.9185%2015.0376C8.73578%2014.8597%208.59055%2014.6471%208.49138%2014.4122C8.39221%2014.1773%208.34112%2013.9249%208.34112%2013.6699C8.34112%2013.4149%208.39221%2013.1625%208.49138%2012.9276C8.59055%2012.6927%208.73578%2012.48%208.9185%2012.3022L14.4202%206.90706Z'%20fill='black'/%3e%3c/svg%3e",b2={class:"application-settings p-4"},x2={class:"max-w-[400px] mx-auto"},y2={class:"mb-5"},w2={class:"mb-5"},L2={class:"border border-[#E6E7EB] rounded-2xl w-full divide-y divide-[#E6E7EB]"},S2={class:"flex items-center justify-between p-4"},V2={class:"flex items-center justify-between p-4"},A2={class:"flex items-center justify-between p-4"},k2={class:"flex justify-end gap-2 mt-6"},D2={key:0,class:"flex justify-center py-12"},_2={key:1,class:"text-center py-12"},h2={key:2,class:""},I2={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 py-4"},P2={class:"w-full sm:w-auto flex items-center gap-2"},E2={key:0,class:"text-center py-12"},N2={class:"text-surface-500"},O2={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},K2=K({__name:"ApplicationSettings",props:{applicationId:{type:String,required:!0}},setup(T2){const v=R(),w=o(""),m=o(""),C=o(!1),g=o(!1),b=o(!1),S=o(!1),f=o(0),D=new r2,c=o([]),V=o(!1),x=o(!1),y=o(null),u=o("");A(()=>r.currentApplication,l=>{l&&(w.value=l.id||"",m.value=l.description||"",C.value=l.enableGraphQL||!1,g.value=l.enableOpenAPI||!1,b.value=l.enableMCP||!1)},{immediate:!0}),X(()=>{if(r.currentApplication){const l=r.currentApplication;w.value=l.id||"",m.value=l.description||"",C.value=l.enableGraphQL||!1,g.value=l.enableOpenAPI||!1,b.value=l.enableMCP||!1}});const Z=async()=>{if(!r.currentApplication){v.add({severity:"error",summary:"Error",detail:"No application selected",life:3e3});return}S.value=!0;try{const l={...r.currentApplication,description:m.value,enableGraphQL:C.value,enableOpenAPI:g.value,enableMCP:b.value};await i2.getApplicationService().save(l),r.currentApplication=l,v.add({severity:"success",summary:"Success",detail:"Application settings saved successfully",life:3e3})}catch{v.add({severity:"error",summary:"Error",detail:"Failed to save application settings",life:3e3})}finally{S.value=!1}},_=async()=>{var l;if(!((l=r.currentApplication)!=null&&l.id)){c.value=[];return}V.value=!0;try{const e=await D.findByApplicationId(r.currentApplication.id);c.value=e}catch{v.add({severity:"error",summary:"Error",detail:"Failed to load saved widgets",life:3e3})}finally{V.value=!1}},q=l=>{y.value=l,x.value=!0},z=async()=>{if(y.value)try{await D.deleteById(y.value),c.value=c.value.filter(l=>l.id!==y.value),v.add({severity:"success",summary:"Success",detail:"Widget deleted successfully",life:3e3})}catch{v.add({severity:"error",summary:"Error",detail:"Failed to delete widget",life:3e3})}finally{x.value=!1,y.value=null}};A(f,l=>{l===1&&_()}),A(()=>r.currentApplication,()=>{f.value===1&&_()});const h=Y(()=>{if(!u.value)return c.value;const l=u.value.toLowerCase();return c.value.filter(e=>{var E,N,O,T,$;const s=((E=e.name)==null?void 0:E.toLowerCase())||"",I=((N=e.description)==null?void 0:N.toLowerCase())||"",P=((O=e.widgetType)==null?void 0:O.toLowerCase())||"";try{const M=JSON.parse(e.config||"{}"),H=((T=M.aiTitle)==null?void 0:T.toLowerCase())||"",J=(($=M.aiSubtitle)==null?void 0:$.toLowerCase())||"";return s.includes(l)||I.includes(l)||P.includes(l)||H.includes(l)||J.includes(l)}catch{return s.includes(l)||I.includes(l)||P.includes(l)}})});return(l,e)=>(d(),p("div",b2,[e[23]||(e[23]=t("h1",{class:"text-2xl font-semibold mb-4"},"Application Settings",-1)),i(a(u2),{value:f.value,"onUpdate:value":e[7]||(e[7]=s=>f.value=Number(s))},{default:n(()=>[i(a(c2),null,{default:n(()=>[i(a(j),{value:0},{default:n(()=>e[10]||(e[10]=[B("General")])),_:1,__:[10]}),i(a(j),{value:1},{default:n(()=>e[11]||(e[11]=[B("Saved widgets")])),_:1,__:[11]})]),_:1}),i(a(p2),{class:"!p-0"},{default:n(()=>[i(a(G),{value:0},{default:n(()=>[W(t("div",null,[t("div",x2,[t("form",{onSubmit:e2(Z,["prevent"]),class:"flex flex-col gap-4"},[t("div",null,[t("div",y2,[e[12]||(e[12]=t("label",{class:"block text-sm text-[#101010] mb-3 font-semibold"},"Name",-1)),i(a(Q),{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=s=>w.value=s),type:"text",class:"w-full",disabled:""},null,8,["modelValue"])]),t("div",w2,[e[13]||(e[13]=t("label",{class:"block text-sm text-[#101010] mb-3 font-semibold"},"Description",-1)),i(a(f2),{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=s=>m.value=s),class:"w-full h-[100px]",rows:"3"},null,8,["modelValue"])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm text-[#101010] mb-3 font-semibold"},"API configuration",-1)),t("div",L2,[t("div",S2,[e[14]||(e[14]=t("div",{class:"flex items-center gap-2"},[t("img",{src:o2}),t("span",{class:"text-[#3F424D] text-sm font-normal"},"GraphQL")],-1)),i(a(k),{modelValue:C.value,"onUpdate:modelValue":e[2]||(e[2]=s=>C.value=s),onLabel:"On",offLabel:"Off"},null,8,["modelValue"])]),t("div",V2,[e[15]||(e[15]=t("div",{class:"flex items-center gap-2"},[t("img",{src:n2}),t("span",{class:"text-[#3F424D] text-sm font-normal"},"OpenAPI")],-1)),i(a(k),{modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=s=>g.value=s),onLabel:"On",offLabel:"Off"},null,8,["modelValue"])]),t("div",A2,[e[16]||(e[16]=t("div",{class:"flex items-center gap-2"},[t("img",{src:g2}),t("span",{class:"text-[#3F424D] text-sm font-normal"},"MCP (Model Context Protocol)")],-1)),i(a(k),{modelValue:b.value,"onUpdate:modelValue":e[4]||(e[4]=s=>b.value=s),onLabel:"On",offLabel:"Off"},null,8,["modelValue"])])])])]),t("div",k2,[i(a(L),{type:"submit",disabled:S.value,severity:"primary",label:"Save Settings"},null,8,["disabled"])])],32)])],512),[[F,f.value===0]])]),_:1}),i(a(G),{value:1},{default:n(()=>[W(t("div",null,[V.value?(d(),p("div",D2,e[18]||(e[18]=[t("i",{class:"pi pi-spin pi-spinner text-3xl text-primary-500"},null,-1)]))):c.value.length===0?(d(),p("div",_2,e[19]||(e[19]=[t("div",{class:"mb-4"},[t("i",{class:"pi pi-chart-bar text-6xl text-surface-300"})],-1),t("h3",{class:"text-lg font-semibold text-surface-800 mb-2"},"No saved widgets yet",-1),t("p",{class:"text-surface-500"}," Create data insights in the Data Insights page to save widgets here. ",-1)]))):(d(),p("div",h2,[t("div",I2,[t("div",P2,[i(a(m2),{"icon-position":"left",class:"w-full sm:w-80"},{default:n(()=>[i(a(C2),{class:"pi pi-search"}),i(a(Q),{modelValue:u.value,"onUpdate:modelValue":e[5]||(e[5]=s=>u.value=s),placeholder:"Search widgets...",class:"w-full"},null,8,["modelValue"])]),_:1}),u.value?(d(),U(a(L),{key:0,icon:"pi pi-times",severity:"secondary",text:"",rounded:"",onClick:e[6]||(e[6]=s=>u.value=""),"aria-label":"Clear search"})):t2("",!0)])]),h.value.length===0&&u.value?(d(),p("div",E2,[e[20]||(e[20]=t("div",{class:"mb-4"},[t("i",{class:"pi pi-search text-4xl text-surface-300"})],-1)),e[21]||(e[21]=t("h3",{class:"text-lg font-semibold text-surface-800 mb-2"},"No widgets found",-1)),t("p",N2,' No widgets match your search "'+l2(u.value)+'" ',1)])):(d(),p("div",O2,[(d(!0),p(s2,null,a2(h.value,s=>(d(),U(d2,{key:s.id||"unknown",widget:s,onDelete:q},null,8,["widget"]))),128))]))]))],512),[[F,f.value===1]])]),_:1})]),_:1})]),_:1},8,["value"]),i(a(v2),{visible:x.value,"onUpdate:visible":e[9]||(e[9]=s=>x.value=s),modal:"",header:"Delete Widget",style:{width:"450px"}},{footer:n(()=>[i(a(L),{label:"Cancel",severity:"secondary",onClick:e[8]||(e[8]=s=>x.value=!1)}),i(a(L),{label:"Delete",severity:"danger",onClick:z})]),default:n(()=>[e[22]||(e[22]=t("div",{class:"flex items-start gap-3"},[t("i",{class:"pi pi-exclamation-triangle text-3xl text-orange-500"}),t("div",null,[t("p",{class:"text-surface-700"}," Are you sure you want to delete this widget? This action cannot be undone. ")])],-1))]),_:1,__:[22]},8,["visible"])]))}});export{K2 as default};
//# sourceMappingURL=ApplicationSettings-BCLdgyk9.js.map

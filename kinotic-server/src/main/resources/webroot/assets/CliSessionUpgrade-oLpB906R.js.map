{"version":3,"file":"CliSessionUpgrade-oLpB906R.js","sources":["../../src/services/SessionUpgradeService.ts","../../src/pages/CliSessionUpgrade.vue"],"sourcesContent":["import {Continuum, type IServiceProxy} from '@kinotic/continuum-client'\n\nexport class SessionMetadata {\n    public sessionId!: string\n    public replyToId!: string \n    constructor(sessionId: string, replyToId: string) {\n        this.sessionId = sessionId\n        this.replyToId = replyToId\n    }\n}\n\nexport interface ISessionUpgradeService {\n\n    upgradeSession(upgradeId: string, sessionMetadata: SessionMetadata): Promise<void>\n\n}\n\nexport class SessionUpgradeService implements ISessionUpgradeService {\n\n    protected serviceProxy: IServiceProxy\n\n    constructor() {\n        this.serviceProxy = Continuum.serviceProxy('continuum.cli.SessionUpgradeService')\n    }\n\n    public async upgradeSession(upgradeId: string, sessionMetadata: SessionMetadata): Promise<void> {\n        await this.serviceProxy.invoke('upgradeSession', [sessionMetadata], upgradeId)\n    }\n}\n\n\nexport const SESSION_UPGRADE_SERVICE: ISessionUpgradeService = new SessionUpgradeService()\n","<template>\n  <div class=\"flex w-full justify-center items-center h-screen mx-auto\">\n    <div class=\"relative w-1/2 h-full bg-gradient-to-br from-[#0A0A0B] from-0% via-[#0A0A0B] via-70% to-[#293A9E] to-100% hidden md:block\">\n      <img src=\"@/assets/login-page-symbol-new.svg\" class=\"absolute right-0 bottom-0 h-screen\"/>\n      <img src=\"@/assets/login-page-logo-new.svg\" class=\"absolute left-[75px] bottom-[56px] h-[63px] w-auto  xl:h-[63px] lg:h-[52px] md:max-w-[200px] md:h-[42px] sm:max-w-[150px] sm:h-[32px]\"/>\n    </div>\n    \n    <div class=\"w-1/2 h-full flex flex-col justify-center items-center bg-center bg-cover relative\">\n      <div class=\"flex flex-col items-center\">\n        <img src=\"@/assets/login-page-logo.svg\" class=\"w-[218px] h-[45px] mb-[53px]\" />\n\n        <div class=\"text-center\">\n          <div class=\"w-[64px] h-[64px] mx-auto mb-6 flex items-center justify-center bg-green-50 border-2 border-green-200 rounded-full\">\n            <svg v-if=\"authenticated\" class=\"w-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"></path>\n            </svg>\n            <svg v-else class=\"w-16 h-16 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n            </svg>\n          </div>\n          <h2 class=\"text-4xl font-semibold text-gray-800 mb-4\">{{ title }}</h2>\n          <p class=\"text-base text-gray-600\">{{ message }}</p>\n        </div>\n\n        <div v-if=\"loading\" class=\"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75\">\n          <div class=\"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600\"></div>\n        </div>\n      </div>\n      \n      <div class=\"flex gap-2 absolute bottom-8 left-0 right-0 justify-center\"> \n        <a href=\"#\" class=\"text-[#0568FD] border-b-1\">\n          Terms of use\n        </a>\n        <span class=\"text-gray-400\">\n          |\n        </span>\n        <span class=\"text-[#0568FD] border-b-1\">\n          Privacy policy\n        </span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue } from 'vue-facing-decorator'\nimport { USER_STATE } from '@/states/IUserState'\nimport { SESSION_UPGRADE_SERVICE, SessionMetadata } from '@/services/SessionUpgradeService'\nimport { Continuum } from '@kinotic/continuum-client'\n\n@Component({\n  components: {}\n})\nexport default class CliSessionUpgrade extends Vue {\n  @Prop({ type: String, required: false, default: null })\n  public id!: string | null\n\n  private loading: boolean = false\n  private authenticated: boolean = false\n  private title: string = 'Authenticating'\n  private message: string = 'Connecting CLI to Continuum...'\n\n  public async mounted() {\n    const id = this.$route.params.id as string\n    \n    if (id) {\n      if (USER_STATE.connectedInfo?.sessionId) {\n        this.loading = true\n        try {\n          const decodedId = decodeURIComponent(id)\n          await SESSION_UPGRADE_SERVICE.upgradeSession(decodedId, new SessionMetadata(USER_STATE.connectedInfo.sessionId, USER_STATE.connectedInfo.replyToId))\n          \n        } catch (e) {\n          this.setStatus('Error connecting CLI to Continuum: ' + e, false, false)\n        } finally {\n          this.setStatus('You can close this tab and return to your command line.', true, false)\n          await Continuum.disconnect(true)\n          this.loading = false\n        }\n      } else {\n        this.setStatus('Error connecting CLI to Continuum: No session found.', false, false)\n      }\n    } else {\n      this.setStatus('Error connecting CLI to Continuum: No upgrade id provided.', false, false)\n    }\n  }\n\n  private setStatus(message: string, authenticated: boolean, loading: boolean) {\n    this.title = (loading ? 'Authenticating' : (authenticated ? 'Authentication Successful' : 'Authentication Failed'))\n    this.message = message\n    this.authenticated = authenticated\n    this.loading = loading\n  }\n}\n</script>\n\n"],"names":["SessionMetadata","sessionId","replyToId","__publicField","SessionUpgradeService","Continuum","upgradeId","sessionMetadata","SESSION_UPGRADE_SERVICE","CliSessionUpgrade","Vue","id","_a","USER_STATE","decodedId","e","message","authenticated","loading","__decorateClass","Prop","Component","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_8","_hoisted_9","_openBlock","_createElementBlock","_cache","_createElementVNode","_imports_0","_imports_1","_imports_2","_ctx","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_10","_createCommentVNode"],"mappings":"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"}
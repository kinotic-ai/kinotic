{"version":3,"file":"SavedWidgets-CDmnAk8V.js","sources":["../../src/pages/SavedWidgets.vue"],"sourcesContent":["<template>\n  <div class=\"saved-widgets-page p-4\">\n    <h1 class=\"text-2xl font-semibold mb-4\">Saved Widgets</h1>\n\n    <!-- Loading state -->\n    <div v-if=\"loadingWidgets\" class=\"flex justify-center py-12\">\n      <i class=\"pi pi-spin pi-spinner text-3xl text-primary-500\"></i>\n    </div>\n\n    <!-- Empty state -->\n    <div v-else-if=\"savedWidgets.length === 0\" class=\"text-center py-12\">\n      <div class=\"mb-4\">\n        <i class=\"pi pi-chart-bar text-6xl text-surface-300\"></i>\n      </div>\n      <h3 class=\"text-lg font-semibold text-surface-800 mb-2\">No saved widgets yet</h3>\n      <p class=\"text-surface-500\">\n        Create data insights in the Data Insights page to save widgets here.\n      </p>\n    </div>\n\n    <!-- Widgets grid -->\n    <div v-else class=\"\">\n      <div class=\"mb-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3\">\n        <div class=\"w-full sm:w-auto flex items-center gap-2\">\n          <IconField icon-position=\"left\" class=\"w-full sm:w-80\">\n            <InputIcon class=\"pi pi-search\" />\n            <InputText \n              v-model=\"widgetSearchText\" \n              placeholder=\"Search widgets...\" \n              class=\"w-full\"\n            />\n          </IconField>\n          <Button \n            v-if=\"widgetSearchText\"\n            icon=\"pi pi-times\" \n            severity=\"secondary\"\n            text\n            rounded\n            @click=\"widgetSearchText = ''\"\n            aria-label=\"Clear search\"\n          />\n        </div>\n      </div>\n      \n      <!-- No search results -->\n      <div v-if=\"filteredWidgets.length === 0 && widgetSearchText\" class=\"text-center py-12\">\n        <div class=\"mb-4\">\n          <i class=\"pi pi-search text-4xl text-surface-300\"></i>\n        </div>\n        <h3 class=\"text-lg font-semibold text-surface-800 mb-2\">No widgets found</h3>\n        <p class=\"text-surface-500\">\n          No widgets match your search \"{{ widgetSearchText }}\"\n        </p>\n      </div>\n      \n      <!-- Widgets grid -->\n      <div v-else class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n        <SavedWidgetItem\n          v-for=\"widget in filteredWidgets\"\n          :key=\"widget.id || 'unknown'\"\n          :widget=\"widget\"\n          @delete=\"confirmDelete\"\n        />\n      </div>\n    </div>\n\n    <!-- Delete Confirmation Dialog -->\n    <Dialog\n      v-model:visible=\"showDeleteDialog\"\n      modal\n      header=\"Delete Widget\"\n      :style=\"{ width: '450px' }\"\n    >\n      <div class=\"flex items-start gap-3\">\n        <i class=\"pi pi-exclamation-triangle text-3xl text-orange-500\"></i>\n        <div>\n          <p class=\"text-surface-700\">\n            Are you sure you want to delete this widget? This action cannot be undone.\n          </p>\n        </div>\n      </div>\n      <template #footer>\n        <Button\n          label=\"Cancel\"\n          severity=\"secondary\"\n          @click=\"showDeleteDialog = false\"\n        />\n        <Button\n          label=\"Delete\"\n          severity=\"danger\"\n          @click=\"deleteWidget\"\n        />\n      </template>\n    </Dialog>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted, computed } from 'vue'\nimport { InputText, Button, Dialog, IconField, InputIcon } from 'primevue'\nimport { useToast } from 'primevue/usetoast'\nimport { DataInsightsWidgetEntityService } from '@/services/DataInsightsWidgetEntityService'\nimport type { DataInsightsWidget } from '@/domain/DataInsightsWidget'\nimport SavedWidgetItem from '@/components/SavedWidgetItem.vue'\nimport { createDebug } from '@/util/debug'\n\nconst debug = createDebug('saved-widgets');\n\nconst props = defineProps<{\n  applicationId: string\n}>()\n\nconst toast = useToast()\n\n// Saved widgets state\nconst widgetService = new DataInsightsWidgetEntityService()\nconst savedWidgets = ref<DataInsightsWidget[]>([])\nconst loadingWidgets = ref(false)\nconst showDeleteDialog = ref(false)\nconst widgetToDelete = ref<string | null>(null)\nconst widgetSearchText = ref('')\n\n// Load saved widgets for the current application\nconst loadSavedWidgets = async () => {\n  if (!props.applicationId) {\n    savedWidgets.value = []\n    return\n  }\n\n  loadingWidgets.value = true\n  try {\n    const widgets = await widgetService.findByApplicationId(props.applicationId)\n    savedWidgets.value = widgets\n  } catch (error) {\n    debug('Failed to load saved widgets: %O', error)\n    toast.add({\n      severity: 'error',\n      summary: 'Error',\n      detail: 'Failed to load saved widgets',\n      life: 3000\n    })\n  } finally {\n    loadingWidgets.value = false\n  }\n}\n\n// Handle widget deletion\nconst confirmDelete = (widgetId: string) => {\n  widgetToDelete.value = widgetId\n  showDeleteDialog.value = true\n}\n\nconst deleteWidget = async () => {\n  if (!widgetToDelete.value) return\n\n  try {\n    await widgetService.deleteById(widgetToDelete.value)\n    savedWidgets.value = savedWidgets.value.filter(w => w.id !== widgetToDelete.value)\n    \n    toast.add({\n      severity: 'success',\n      summary: 'Success',\n      detail: 'Widget deleted successfully',\n      life: 3000\n    })\n  } catch (error) {\n    debug('Failed to delete widget: %O', error)\n    toast.add({\n      severity: 'error',\n      summary: 'Error',\n      detail: 'Failed to delete widget',\n      life: 3000\n    })\n  } finally {\n    showDeleteDialog.value = false\n    widgetToDelete.value = null\n  }\n}\n\n// Computed property for filtered widgets based on search\nconst filteredWidgets = computed(() => {\n  if (!widgetSearchText.value) return savedWidgets.value\n  \n  const searchLower = widgetSearchText.value.toLowerCase()\n  return savedWidgets.value.filter(widget => {\n    const name = widget.dataInsightsComponent?.name?.toLowerCase() || ''\n    const description = widget.dataInsightsComponent?.description?.toLowerCase() || ''\n    \n    return name.includes(searchLower) || description.includes(searchLower)\n  })\n})\n\nonMounted(() => {\n  loadSavedWidgets()\n})\n</script>\n\n"],"names":["debug","createDebug","props","__props","toast","useToast","widgetService","DataInsightsWidgetEntityService","savedWidgets","ref","loadingWidgets","showDeleteDialog","widgetToDelete","widgetSearchText","loadSavedWidgets","widgets","error","confirmDelete","widgetId","deleteWidget","w","filteredWidgets","computed","searchLower","widget","name","_b","_a","description","_d","_c","onMounted","_openBlock","_createElementBlock","_hoisted_1","_cache","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_createVNode","_unref","IconField","InputIcon","InputText","$event","_createBlock","Button","_hoisted_7","_hoisted_8","_toDisplayString","_hoisted_9","_Fragment","_renderList","SavedWidgetItem","Dialog"],"mappings":"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"}
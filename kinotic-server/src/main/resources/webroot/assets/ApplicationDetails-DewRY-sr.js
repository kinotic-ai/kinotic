var ye=Object.defineProperty;var ve=(t,e,s)=>e in t?ye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var i=(t,e,s)=>ve(t,typeof e!="symbol"?e+"":e,s);import{_ as we,a as Pe,b as Z,c as ee}from"./GraphQLModal-CjbDho2T.js";import{s as te,a as se,b as re,c as oe,d as le}from"./index-BOiP5G75.js";import{s as ie}from"./index-BWJDcOuA.js";import{S as Y,_ as ae,s as Se,P as ne}from"./ProjectStructuresTable-OMQk-i_i.js";import{_ as k,s as ue}from"./CrudTable-Dx3WuCAV.js";import{s as Ie}from"./index-Bpk6tSGt.js";import{s as O}from"./index-d3RWyEKF.js";import{d as $,a as de,C as B,B as F,b as C}from"./component-CLWqUams.js";import{g as W,n as A,A as w,_ as q,c as P,o as h,e as a,b as Q,k as S,w as d,a as r,l as H,t as m,B as E,Q as R,E as Ce,D as M,T as Te,y as J,z as K}from"./index-BAuc_XpL.js";import{D as ce}from"./DatetimeUtil-C1mlUI8S.js";import{s as pe}from"./index-B0amNHxs.js";import{s as he}from"./index-Bz44qjX7.js";import{_ as je,a as $e}from"./index-8yU-erlp.js";import"./GraphQLPlayground-CDY9kcdH.js";import"./index-CEDs-roO.js";import"./index-2fgv3Tde.js";import"./index-ChDFEGgs.js";import"./theme-default-_TCeoouD.js";import"./index-AFbNaqJX.js";import"./index-g95NevXP.js";import"./index-D9EM4B1w.js";import"./index-DN8o-Nsy.js";import"./index-CqdoTLcK.js";import"./index-DeH_O1z3.js";var Me=Object.defineProperty,Ae=Object.getOwnPropertyDescriptor,v=(t,e,s,o)=>{for(var l=o>1?void 0:o?Ae(e,s):e,c=t.length-1,n;c>=0;c--)(n=t[c])&&(l=(o?n(e,s,l):n(l))||l);return o&&l&&Me(e,s,l),l};const X=W("structures-list");let f=class extends F{constructor(){super(...arguments);i(this,"applicationId");i(this,"projectId");i(this,"initialSearch");i(this,"showNewStructureButton");i(this,"newStructureButtonText");i(this,"crudTable");i(this,"structureTableHeaders",[{field:"name",header:"Structure name",sortable:!0},{field:"projectId",header:"Project",sortable:!0},{field:"description",header:"Description",sortable:!1},{field:"created",header:"Created",sortable:!1},{field:"updated",header:"Updated",sortable:!1},{field:"published",header:"Status",sortable:!1,centered:!0}]);i(this,"showModal",!1);i(this,"showItemModal",!1);i(this,"showPublishModal",!1);i(this,"showUnpublishModal",!1);i(this,"selectedStructure",null);i(this,"searchText","");i(this,"isInitialized",!1);i(this,"actionMenus",[]);i(this,"currentActionItem",null);i(this,"dataSource1",A.getStructureService());i(this,"DatetimeUtil",ce)}mounted(){this.searchText=this.initialSearch||"",this.isInitialized=!0}onInitialSearchChanged(e){this.isInitialized&&(this.searchText=e||"",this.refreshTable())}onApplicationIdChanged(){this.refreshTable()}onProjectIdChanged(){this.refreshTable()}get dataSource(){return{findAll:async e=>{const s=A.getStructureService(),o=this.projectId?await s.findAllForProject(this.projectId,e):await s.findAllForApplication(this.applicationId,e);return w.structuresCount=o.totalElements??0,o},search:async(e,s)=>{const l=`${this.projectId?`projectId:${this.projectId}`:`applicationId:${this.applicationId}`} && ${this.searchText}`;return A.getStructureService().search(l,s)}}}get structuresCount(){return w.structuresCount}refreshTable(){var e;(e=this.crudTable)!=null&&e.find&&this.crudTable.find()}updateRouteQuery(e){this.searchText=e;const s={...this.$route.query};e?s["search-structure"]=e:delete s["search-structure"],this.$router.replace({query:s}).catch(()=>{}),this.refreshTable()}openModal(e){this.selectedStructure=e,this.showModal=!0}closeModal(){this.showModal=!1,this.selectedStructure=null}openItemModal(e){this.selectedStructure=e,this.showItemModal=!0}closeItemModal(){this.showItemModal=!1,this.selectedStructure=null}openPublishModal(e){this.selectedStructure=e,this.showPublishModal=!0}closePublishModal(){this.showPublishModal=!1,this.selectedStructure=null}openUnpublishModal(e){this.selectedStructure=e,this.showUnpublishModal=!0}closeUnpublishModal(){this.showUnpublishModal=!1,this.selectedStructure=null}handleRowClick(e){e.published?this.openModal(e):this.openPublishModal(e)}onEditItem(e){this.$router.push(`${this.$route.path}/edit/${e.id}`)}toggleMenu(e,s,o){this.currentActionItem=s;const l=this.actionMenus[o];l&&l.toggle(e)}async publish(e){var o;e.publishing=!0;let s=(o=this.$refs)==null?void 0:o.crudTable;try{await this.dataSource1.publish(e.id),s==null||s.find(),delete e.publishing}catch(l){delete e.publishing,s==null||s.displayAlert(l.message)}}async publishFromModal(){if(!this.selectedStructure)return;const e=this.selectedStructure;e.publishing=!0;try{await this.dataSource1.publish(e.id),this.closePublishModal(),this.refreshTable(),delete e.publishing}catch(s){delete e.publishing,X("Error publishing structure: %O",s)}}async unPublish(e){this.openUnpublishModal(e)}async unpublishFromModal(){if(!this.selectedStructure)return;const e=this.selectedStructure;e.publishing=!0;try{await this.dataSource1.unPublish(e.id),this.closeUnpublishModal(),this.refreshTable(),delete e.publishing}catch(s){delete e.publishing,X("Error unpublishing structure: %O",s)}}getActionMenu(e){return[{label:e.published?"Unpublish":"Publish",icon:e.published?"pi pi-eye-slash":"pi pi-eye",command:()=>e.published?this.unPublish(e):this.publish(e)},{label:"View",icon:"pi pi-file",command:s=>{var o,l,c,n;(l=(o=s==null?void 0:s.originalEvent)==null?void 0:o.stopPropagation)==null||l.call(o),(n=(c=s==null?void 0:s.originalEvent)==null?void 0:c.preventDefault)==null||n.call(c),this.openItemModal(e)}}]}get isPublishing(){var e;return((e=this.selectedStructure)==null?void 0:e.publishing)||!1}};v([$({required:!0})],f.prototype,"applicationId",2);v([$({required:!1,default:void 0})],f.prototype,"projectId",2);v([$({required:!1,default:""})],f.prototype,"initialSearch",2);v([$({required:!1,default:!1})],f.prototype,"showNewStructureButton",2);v([$({required:!1,default:"New Structure"})],f.prototype,"newStructureButtonText",2);v([de("crudTable")],f.prototype,"crudTable",2);v([C("initialSearch")],f.prototype,"onInitialSearchChanged",1);v([C("applicationId")],f.prototype,"onApplicationIdChanged",1);v([C("projectId")],f.prototype,"onProjectIdChanged",1);f=v([B({components:{CrudTable:k,StructureDataViewModal:ae,StructureItemModal:Y,Dialog:ie,Button:O}})],f);const _e={class:"w-full text-center"},Oe={class:"flex items-center justify-center"},Ue={class:"flex items-center"},De={class:"flex justify-end gap-3"},xe={class:"flex items-center"},Ne={class:"flex justify-end gap-3"};function Qe(t,e,s,o,l,c){var x,N;const n=Se,g=O,T=Ie,I=k,p=ae,V=Y,D=ie;return h(),P("div",null,[a(I,{ref:"crudTable",rowHoverColor:"","data-source":t.dataSource,headers:t.structureTableHeaders,singleExpand:!1,search:t.searchText,"onUpdate:search":t.updateRouteQuery,onEditItem:t.onEditItem,onOnRowClick:t.handleRowClick,isShowAddNew:t.showNewStructureButton,createNewButtonText:t.newStructureButtonText,class:"!text-sm",emptyStateText:"No structures yet"},{"item.created":d(({item:u})=>[r("span",null,m(t.DatetimeUtil.formatMonthDayYear(u.created)),1)]),"item.updated":d(({item:u})=>[r("span",null,m(t.DatetimeUtil.formatRelativeDate(u.updated)),1)]),"item.published":d(({item:u})=>[r("div",_e,[a(n,{value:u.published?"Published":"Unpublished",severity:u.published?"success":"secondary",class:"px-2 py-1 text-sm",rounded:""},null,8,["value","severity"])])]),"additional-actions":d(({item:u})=>[r("div",Oe,[a(g,{icon:"pi pi-ellipsis-v",onClick:H(b=>t.toggleMenu(b,u,u.id),["stop"]),"aria-haspopup":"true","aria-controls":"action_menu_"+u.id,type:"button",severity:"secondary",variant:"text"},null,8,["onClick","aria-controls"]),a(T,{ref:b=>t.actionMenus[u.id]=b,model:t.getActionMenu(u),popup:!0,id:"action_menu_"+u.id},null,8,["model","id"])])]),_:1},8,["data-source","headers","search","onUpdate:search","onEditItem","onOnRowClick","isShowAddNew","createNewButtonText"]),t.selectedStructure?(h(),Q(p,{key:0,modelValue:t.showModal,"onUpdate:modelValue":e[0]||(e[0]=u=>t.showModal=u),title:((x=t.selectedStructure)==null?void 0:x.name)||"Data View","entity-props":{structureId:(N=t.selectedStructure)==null?void 0:N.id},onClose:t.closeModal},null,8,["modelValue","title","entity-props","onClose"])):S("",!0),t.showItemModal&&t.selectedStructure?(h(),Q(V,{key:1,item:t.selectedStructure,onClose:t.closeItemModal},null,8,["item","onClose"])):S("",!0),a(D,{visible:t.showPublishModal,"onUpdate:visible":e[1]||(e[1]=u=>t.showPublishModal=u),modal:"",style:{width:"400px"},closable:!1},{header:d(()=>{var u,b,y;return[r("div",Ue,[r("span",null,m(((u=t.selectedStructure)==null?void 0:u.name)||"Structure"),1),r("div",{class:E(["ml-2 px-3 py-1 rounded-full text-sm font-medium",(b=t.selectedStructure)!=null&&b.published?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},m((y=t.selectedStructure)!=null&&y.published?"Published":"Unpublished"),3)])]}),footer:d(()=>[r("div",De,[a(g,{label:"Cancel",severity:"secondary",onClick:t.closePublishModal,class:"px-4 py-2"},null,8,["onClick"]),a(g,{label:"Publish",onClick:t.publishFromModal,loading:t.isPublishing,class:"px-4 py-2"},null,8,["onClick","loading"])])]),default:d(()=>[e[3]||(e[3]=r("div",{class:"mb-6"},[r("p",{class:"text-gray-700"}," The structure must be published before it can contain data. Would you like to publish it? ")],-1))]),_:1,__:[3]},8,["visible"]),a(D,{visible:t.showUnpublishModal,"onUpdate:visible":e[2]||(e[2]=u=>t.showUnpublishModal=u),modal:"",style:{width:"450px"},closable:!1},{header:d(()=>{var u,b,y;return[r("div",xe,[r("span",null,m(((u=t.selectedStructure)==null?void 0:u.name)||"Structure"),1),r("div",{class:E(["ml-2 px-3 py-1 rounded-full text-sm font-medium",(b=t.selectedStructure)!=null&&b.published?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},m((y=t.selectedStructure)!=null&&y.published?"Published":"Unpublished"),3)])]}),footer:d(()=>[r("div",Ne,[a(g,{label:"Cancel",severity:"secondary",onClick:t.closeUnpublishModal,class:"px-4 py-2"},null,8,["onClick"]),a(g,{label:"Unpublish",severity:"danger",onClick:t.unpublishFromModal,loading:t.isPublishing,class:"px-4 py-2"},null,8,["onClick","loading"])])]),default:d(()=>[e[4]||(e[4]=r("div",{class:"mb-6"},[r("div",{class:"flex items-start gap-3"},[r("div",{class:"flex-shrink-0"},[r("svg",{class:"w-6 h-6 text-red-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[r("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])]),r("div",null,[r("p",{class:"text-gray-700 font-medium mb-2"},"Are you sure you want to unpublish this structure?"),r("p",{class:"text-gray-600 text-sm"}," All data saved under this structure will be permanently deleted. This action cannot be undone. ")])])],-1))]),_:1,__:[4]},8,["visible"])])}const be=q(f,[["render",Qe]]);var Ee=Object.defineProperty,Le=Object.getOwnPropertyDescriptor,me=(t,e,s,o)=>{for(var l=o>1?void 0:o?Le(e,s):e,c=t.length-1,n;c>=0;c--)(n=t[c])&&(l=(o?n(e,s,l):n(l))||l);return o&&l&&Ee(e,s,l),l};const ke=W("new-project-sidebar");let L=class extends F{constructor(){super(...arguments);i(this,"visible");i(this,"form",{name:"",description:"",source:"GUI",language:null});i(this,"loading",!1)}get languageOptions(){return[{label:"TypeScript",value:R.TYPESCRIPT},{label:"GraphQL",value:R.GRAPHQL}]}async handleSubmit(){this.loading=!0;try{const e=w.currentApplication;if(!e)throw new Error("No current application selected");const s=new Ce(null,e.id,this.form.name,this.form.description);if(this.form.source==="GUI")s.sourceOfTruth=R.GRAPHICAL;else if(this.form.source==="Code"){if(this.form.language===null)throw new Error("Please select a language for Code projects.");s.sourceOfTruth=this.form.language}const o=await A.getProjectService().create(s);this.$toast.add({severity:"success",summary:"Success",detail:"Project successfully added",life:3e3}),this.resetForm(),this.$emit("submit",o)}catch(e){ke("Failed to create project: %O",e),this.$toast.add({severity:"error",summary:"Error",detail:"Failed to create project.",life:3e3})}finally{this.loading=!1}}handleClose(){this.resetForm(),this.$emit("close")}resetForm(){this.form={name:"",description:"",source:"GUI",language:null}}};me([$({required:!0})],L.prototype,"visible",2);L=me([B({components:{InputText:he,Textarea:pe,Button:O,Select:ue}})],L);const Be={class:"w-[400px] h-full bg-white shadow-xl overflow-y-auto"},Fe={class:"flex justify-between items-center border-b border-[#E6E7EB] p-4"},qe={class:"flex flex-col gap-5"},Ge={class:"p-1 bg-[#F4F5F9] rounded-xl w-full flex gap-2"},Ve={key:0},Re={class:"flex justify-end gap-2 mt-6"},ze={key:0,class:"pi pi-spin pi-spinner text-white text-sm"};function He(t,e,s,o,l,c){const n=O,g=he,T=pe,I=ue;return h(),Q(Te,{name:"slide"},{default:d(()=>[t.visible?(h(),P("div",{key:0,class:"fixed inset-0 z-50 flex justify-end",onClick:e[6]||(e[6]=H((...p)=>t.handleClose&&t.handleClose(...p),["self"]))},[r("div",Be,[r("div",Fe,[e[8]||(e[8]=r("div",{class:"flex items-center gap-3"},[r("img",{src:we}),r("h2",{class:"text-lg font-semibold text-[#101010]"},"New Project")],-1)),a(n,{onClick:t.handleClose,text:"",rounded:"",class:"p-2 hover:bg-gray-100 transition"},{default:d(()=>e[7]||(e[7]=[r("img",{src:Pe,class:"w-4 h-4"},null,-1)])),_:1,__:[7]},8,["onClick"])]),r("form",{onSubmit:e[5]||(e[5]=H((...p)=>t.handleSubmit&&t.handleSubmit(...p),["prevent"])),class:"flex flex-col justify-between h-[calc(100vh-100px)] p-4"},[r("div",qe,[r("div",null,[e[9]||(e[9]=r("label",{class:"block text-sm font-semibold text-[#101010] mb-2"},"Name",-1)),a(g,{modelValue:t.form.name,"onUpdate:modelValue":e[0]||(e[0]=p=>t.form.name=p),placeholder:"Project name",required:"",class:"w-full"},null,8,["modelValue"])]),r("div",null,[e[10]||(e[10]=r("label",{class:"block text-sm font-semibold text-[#101010] mb-2"},"Description",-1)),a(T,{modelValue:t.form.description,"onUpdate:modelValue":e[1]||(e[1]=p=>t.form.description=p),rows:"3",class:"w-full",placeholder:"Optional description"},null,8,["modelValue"])]),r("div",null,[e[13]||(e[13]=r("label",{class:"block text-sm font-semibold text-[#101010] mb-2"},"Source of truth",-1)),r("div",Ge,[a(n,{type:"button",onClick:e[2]||(e[2]=p=>t.form.source="GUI"),class:E(["w-1/2 text-sm font-bold py-[10px] rounded-lg transition",t.form.source==="GUI"?"!bg-white !text-[#101010]":"!bg-transparent !text-[#5F6165]"]),severity:"secondary"},{default:d(()=>e[11]||(e[11]=[M(" GUI ")])),_:1,__:[11]},8,["class"]),a(n,{type:"button",onClick:e[3]||(e[3]=p=>t.form.source="Code"),class:E(["w-1/2 text-sm font-bold py-[10px] rounded-lg transition",t.form.source==="Code"?"!bg-white !text-[#101010]":"!bg-transparent !text-[#5F6165]"]),severity:"secondary"},{default:d(()=>e[12]||(e[12]=[M(" Code ")])),_:1,__:[12]},8,["class"])])]),t.form.source==="Code"?(h(),P("div",Ve,[e[14]||(e[14]=r("label",{class:"block text-sm font-semibold text-[#101010] mb-2"},"Language",-1)),a(I,{modelValue:t.form.language,"onUpdate:modelValue":e[4]||(e[4]=p=>t.form.language=p),options:t.languageOptions,optionLabel:"label",optionValue:"value",placeholder:"Select language",class:"w-full p-2 border border-[#D2D3D9] rounded-lg text-sm text-[#101010]"},null,8,["modelValue","options"])])):S("",!0)]),r("div",Re,[a(n,{type:"button",onClick:t.handleClose,severity:"secondary"},{default:d(()=>e[15]||(e[15]=[M(" Cancel ")])),_:1,__:[15]},8,["onClick"]),a(n,{type:"submit",disabled:t.loading,severity:"primary",class:"px-[10px] py-[7px] flex items-center gap-2"},{default:d(()=>[t.loading?(h(),P("i",ze)):S("",!0),e[16]||(e[16]=M(" Create Project "))]),_:1,__:[16]},8,["disabled"])])],32)])])):S("",!0)]),_:1})}const fe=q(L,[["render",He],["__scopeId","data-v-863be7e3"]]);var Ye=Object.defineProperty,We=Object.getOwnPropertyDescriptor,U=(t,e,s,o)=>{for(var l=o>1?void 0:o?We(e,s):e,c=t.length-1,n;c>=0;c--)(n=t[c])&&(l=(o?n(e,s,l):n(l))||l);return o&&l&&Ye(e,s,l),l};const z=W("project-list");let j=class extends F{constructor(){super(...arguments);i(this,"applicationId");i(this,"crudTable");i(this,"searchText","");i(this,"showProjectSidebar",!1);i(this,"selectedProjectId",null);i(this,"isInitialized",!1);i(this,"projectTableHeaders",[{field:"name",header:"Project Name",sortable:!0},{field:"sourceOfTruth",header:"Source of Truth",sortable:!0},{field:"description",header:"Description",sortable:!1},{field:"updated",header:"Updated",sortable:!1}]);i(this,"DatetimeUtil",ce)}mounted(){this.searchText=this.$route.query["search-project"]||"",this.isInitialized=!0}onSearchQueryChange(e){this.isInitialized&&(this.searchText=e||"",this.refreshTable())}onAppChange(){this.refreshTable()}get dataSource(){return{findAll:async e=>{const s=await A.getProjectService().findAllForApplication(this.applicationId,e);return w.projectsCount=s.totalElements??0,s},search:async(e,s)=>{const o=`applicationId:${this.applicationId} && ${this.searchText}`;return A.getProjectService().search(o,s)}}}get projectsCount(){return w.projectsCount}refreshTable(){var e,s;(s=(e=this.crudTable)==null?void 0:e.find)==null||s.call(e)}updateRouteQuery(e){this.searchText=e;const s={...this.$route.query};e?s["search-project"]=e:delete s["search-project"],this.$router.replace({query:s}).catch(()=>{}),this.refreshTable()}onAddProject(){this.showProjectSidebar=!0}onProjectSidebarClose(){this.showProjectSidebar=!1}async onProjectSubmit(){try{this.refreshTable()}catch(e){z("Refresh after project creation failed: %O",e),this.$toast.add({severity:"error",summary:"Error",detail:"Failed to refresh project list.",life:3e3})}finally{this.showProjectSidebar=!1}}onEditItem(e){this.$router.push(`${this.$route.path}/edit/${e.id}`)}async toProjectPage(e){if(e.id)try{const s=this.applicationId,o=e.id;z("Navigating to project: %s, ID: %s, App ID: %s",e.name,o,s),await this.$router.push(`/application/${encodeURIComponent(s)}/project/${encodeURIComponent(o)}/structures`)}catch(s){z("Failed to navigate to project page: %O",s)}}clearSelectedProject(){this.selectedProjectId=null}};U([$({required:!0})],j.prototype,"applicationId",2);U([de("crudTable")],j.prototype,"crudTable",2);U([C("$route.query.search-project")],j.prototype,"onSearchQueryChange",1);U([C("applicationId")],j.prototype,"onAppChange",1);j=U([B({components:{CrudTable:k,NewProjectSidebar:fe,ProjectStructuresTable:ne}})],j);const Je={key:1,class:"mt-6"},Ke={class:"flex items-center justify-between mb-4"},Xe={class:"text-xl font-semibold text-[#101010]"};function Ze(t,e,s,o,l,c){const n=k,g=O,T=ne,I=fe;return h(),P("div",null,[t.selectedProjectId?S("",!0):(h(),Q(n,{key:0,ref:"crudTable",rowHoverColor:"","data-source":t.dataSource,headers:t.projectTableHeaders,singleExpand:!1,search:t.searchText,"onUpdate:search":t.updateRouteQuery,onAddItem:t.onAddProject,onEditItem:t.onEditItem,onOnRowClick:t.toProjectPage,createNewButtonText:"New Project",emptyStateText:"No projects yet",isShowAddNew:!0,class:"!text-sm"},{"item.id":d(({item:p})=>[r("span",null,m(p.id),1)]),"item.updated":d(({item:p})=>[r("span",null,m(t.DatetimeUtil.formatRelativeDate(p.updated)),1)]),_:1},8,["data-source","headers","search","onUpdate:search","onAddItem","onEditItem","onOnRowClick"])),t.selectedProjectId?(h(),P("div",Je,[r("div",Ke,[r("h2",Xe," Structures for Project: "+m(t.selectedProjectId),1),a(g,{label:"Back to Projects",icon:"pi pi-arrow-left",onClick:t.clearSelectedProject},null,8,["onClick"])]),a(T,{projectId:t.selectedProjectId},null,8,["projectId"])])):S("",!0),a(I,{visible:t.showProjectSidebar,onClose:t.onProjectSidebarClose,onSubmit:t.onProjectSubmit},null,8,["visible","onClose","onSubmit"])])}const ge=q(j,[["render",Ze]]);var et=Object.defineProperty,tt=Object.getOwnPropertyDescriptor,G=(t,e,s,o)=>{for(var l=o>1?void 0:o?tt(e,s):e,c=t.length-1,n;c>=0;c--)(n=t[c])&&(l=(o?n(e,s,l):n(l))||l);return o&&l&&et(e,s,l),l};let _=class extends F{constructor(){super(...arguments);i(this,"activeTab",0);i(this,"showGraphQLModal",!1);i(this,"showOpenAPIModal",!1);i(this,"isInitialized",!1)}get applicationId(){var s;return((s=w.currentApplication)==null?void 0:s.id)||""}get projectsCount(){return w.projectsCount??0}get structuresCount(){return w.structuresCount??0}get currentApplication(){return w.currentApplication}get searchProduct(){return this.$route.query["search-project"]}get searchStructure(){return this.$route.query["search-structure"]}get activeTabFromQuery(){const s=this.$route.query;if("tab"in s){const o=parseInt(s.tab);return isNaN(o)?0:o}return 0}created(){this.activeTab=this.activeTabFromQuery,this.isInitialized=!0}onQueryChanged(){const s=this.activeTabFromQuery;this.activeTab!==s&&(this.activeTab=s)}onApplicationChange(){}onTabChanged(s){if(!this.isInitialized)return;const o={...this.$route.query};o.tab=String(s),this.$router.replace({query:o}).catch(()=>{})}openGraphQL(){this.showGraphQLModal=!0}closeGraphQL(){this.showGraphQLModal=!1}openOpenAPI(){this.showOpenAPIModal=!0}closeOpenAPI(){this.showOpenAPIModal=!1}};G([C("$route.query",{immediate:!0})],_.prototype,"onQueryChanged",1);G([C("APPLICATION_STATE.currentApplication")],_.prototype,"onApplicationChange",1);G([C("activeTab")],_.prototype,"onTabChanged",1);_=G([B({components:{ProjectList:ge,StructuresList:be,GraphQLModal:ee,OpenAPIModal:Z,StructureItemModal:Y,Tabs:le,TabList:oe,Tab:re,TabPanels:se,TabPanel:te}})],_);const st={class:"p-10"},rt={class:"flex justify-between items-center mb-6 h-[58px]"},ot={class:"font-semibold text-2xl text-surface-950 mb-3"},lt={class:"flex gap-3 h-full"};function it(t,e,s,o,l,c){var u,b;const n=re,g=oe,T=ge,I=te,p=be,V=se,D=le,x=ee,N=Z;return h(),P("div",st,[r("div",rt,[r("div",null,[r("h1",ot,m(t.applicationId),1),r("span",null,m(t.projectsCount)+" projects, "+m(t.structuresCount)+" structures",1)]),r("div",lt,[(u=t.currentApplication)!=null&&u.enableGraphQL?(h(),P("div",{key:0,onClick:e[0]||(e[0]=(...y)=>t.openGraphQL&&t.openGraphQL(...y)),class:"border border-surface-200 rounded-xl flex items-center gap-2 px-16 cursor-pointer"},e[3]||(e[3]=[r("img",{src:je,class:"w-6 h-6"},null,-1),r("span",{class:"text-sm font-semibold"},"GraphQL",-1)]))):S("",!0),(b=t.currentApplication)!=null&&b.enableOpenAPI?(h(),P("div",{key:1,onClick:e[1]||(e[1]=(...y)=>t.openOpenAPI&&t.openOpenAPI(...y)),class:"border border-surface-200 rounded-xl flex items-center gap-2 px-16 cursor-pointer"},e[4]||(e[4]=[r("img",{src:$e,class:"w-6 h-6"},null,-1),r("span",{class:"text-sm font-semibold"},"OpenAPI",-1)]))):S("",!0)])]),a(D,{value:t.activeTab,"onUpdate:value":e[2]||(e[2]=y=>t.activeTab=y)},{default:d(()=>[a(g,null,{default:d(()=>[a(n,{value:0},{default:d(()=>e[5]||(e[5]=[M("Projects")])),_:1,__:[5]}),a(n,{value:1},{default:d(()=>e[6]||(e[6]=[M("Structures")])),_:1,__:[6]})]),_:1}),a(V,null,{default:d(()=>[a(I,{value:0},{default:d(()=>[J(r("div",null,[a(T,{applicationId:t.applicationId,initialSearch:t.searchProduct},null,8,["applicationId","initialSearch"])],512),[[K,t.activeTab===0]])]),_:1}),a(I,{value:1},{default:d(()=>[J(r("div",null,[a(p,{applicationId:t.applicationId,initialSearch:t.searchStructure},null,8,["applicationId","initialSearch"])],512),[[K,t.activeTab===1]])]),_:1})]),_:1})]),_:1},8,["value"]),a(x,{visible:t.showGraphQLModal,onClose:t.closeGraphQL},null,8,["visible","onClose"]),a(N,{visible:t.showOpenAPIModal,onClose:t.closeOpenAPI},null,8,["visible","onClose"])])}const Dt=q(_,[["render",it]]);export{Dt as default};
//# sourceMappingURL=ApplicationDetails-DewRY-sr.js.map

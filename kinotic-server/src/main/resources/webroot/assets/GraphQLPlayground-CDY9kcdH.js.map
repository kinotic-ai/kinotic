{"version":3,"file":"GraphQLPlayground-CDY9kcdH.js","sources":["../../src/pages/GraphQLPlayground.vue"],"sourcesContent":["<template>\n    <iframe\n        ref=\"iframeRef\"\n        src=\"/graphiql.html\"\n        width=\"100%\"\n        height=\"100%\"\n        frameborder=\"0\"\n    ></iframe>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport Cookies from 'js-cookie'\nimport { USER_STATE } from '@/states/IUserState'\nimport {createDebug} from '@/util/debug.ts'\nconst debug = createDebug('graphql-playground')\n\nconst iframeRef = ref(null)\n\nfunction getQueryParam(name) {\n    const urlParams = new URLSearchParams(window.location.search)\n    return urlParams.get(name)\n}\n\nonMounted(() => {\n    const namespace = getQueryParam('namespace') || 'default'\n\n    // Determine auth method based on whether we have an OIDC user\n    const isOidcAuth = USER_STATE.oidcUser !== null\n    const token = isOidcAuth ? Cookies.get('token') : null\n    const sessionId = USER_STATE.connectedInfo?.sessionId\n\n    if (!isOidcAuth && !sessionId) {\n        debug('No active session for playground')\n        return\n    }\n\n    iframeRef.value?.addEventListener('load', () => {\n        iframeRef.value.contentWindow.postMessage({\n                                                      namespace,\n                                                      token,      // Will be set for OIDC, null for basic auth\n                                                      sessionId   // Will be set for both, used by basic auth\n                                                  }, '*')\n    })\n})\n</script>\n"],"names":["debug","createDebug","iframeRef","ref","getQueryParam","name","onMounted","namespace","isOidcAuth","USER_STATE","token","Cookies","sessionId","_a","_b","_createElementBlock"],"mappings":"gIAeA,MAAMA,EAAQC,EAAY,oBAAoB,EAExCC,EAAYC,EAAI,IAAI,EAE1B,SAASC,EAAcC,EAAM,CAEzB,OADkB,IAAI,gBAAgB,OAAO,SAAS,MAAM,EAC3C,IAAIA,CAAI,CAC7B,CAEA,OAAAC,EAAU,IAAM,SACZ,MAAMC,EAAYH,EAAc,WAAW,GAAK,UAG1CI,EAAaC,EAAW,WAAa,KACrCC,EAAQF,EAAaG,EAAQ,IAAI,OAAO,EAAI,KAC5CC,GAAYC,EAAAJ,EAAW,gBAAX,YAAAI,EAA0B,UAE5C,GAAI,CAACL,GAAc,CAACI,EAAW,CAC3BZ,EAAM,kCAAkC,EACxC,MACR,EAEIc,EAAAZ,EAAU,QAAV,MAAAY,EAAiB,iBAAiB,OAAQ,IAAM,CAC5CZ,EAAU,MAAM,cAAc,YAAY,CACI,UAAAK,EACA,MAAAG,EACA,UAAAE,CACtD,EAAqD,GAAG,CACnD,EACL,CAAC,cA3CGG,EAMU,SAAA,SALF,YAAJ,IAAIb,EACJ,IAAI,iBACJ,MAAM,OACN,OAAO,OACP,YAAY"}
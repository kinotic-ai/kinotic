---
outline: deep
---

# Getting Started with Structures

## Prerequisites
- Node.js (v22.13.1 or later)
- Docker and Docker Compose
- Structures CLI (`pnpm install -g @mindignited/structures-cli`) - [npm package](https://www.npmjs.com/package/@mindignited/structures-cli)

## Setting Up the Development Server
1. Clone the Structures repository:
```bash
git clone https://github.com/mindignited/structures.git
cd structures
```

2. Start the development server:

   **For Mac users (Apple Silicon M1/M2/M3/M4):**
   ```bash
   cd docker-compose
   docker-compose -f compose.yml -f compose.ek-m4.override.yml up -d
   ```
   > **Note for Mac users**: The `compose.ek-m4.override.yml` file contains optimizations specifically for Apple Silicon processors. This override file sets the `_JAVA_OPTIONS=-XX:UseSVE=0` environment variable for Elasticsearch, which prevents performance issues on ARM-based Macs.

   **For other platforms:**
   ```bash
   cd docker-compose
   docker-compose up -d
   ```

3. Visit [http://localhost:9090](http://localhost:9090) to access the Structures GUI
   - **Username**: admin
   - **Password**: structures

## Using Structures in Your Project

Choose your setup path:
- [New Project Setup](#new-project-setup) - Start fresh with a new project
- [Adding to Existing Project](#adding-structures-to-an-existing-project) - Integrate Structures into your current project

### New Project Setup

#### React + TypeScript Project
1. Create a new React project with TypeScript:
```bash
pnpm create vite@latest my-structures-app --template react-ts
cd my-structures-app
```

2. Initialize Structures in your project:
```bash
structures init --application my.app --entities src/entities --generated src/generated
```

3. Install required dependencies:
```bash
pnpm install @mindignited/structures-api
```

4. Create your first entity in `src/entities/Person.ts`:
```typescript
import { Entity, AutoGeneratedId, MultiTenancyType } from '@mindignited/structures-api'

@Entity(MultiTenancyType.SHARED)
export class Person {
    @AutoGeneratedId
    public id: string | null = null
    public firstName: string = ''
    public lastName: string = ''
}
```

5. Sync your entity with the Structures server:
```bash
structures sync -p --server http://localhost:9090
```

6. Use the generated service in your React component:
```typescript
import { useEffect, useState } from 'react'
import { Continuum } from '@mindignited/structures-api'
import { PersonEntityService } from '../generated/PersonEntityService'

function App() {
    const [persons, setPersons] = useState([])

    useEffect(() => {
        async function init() {
            // Connect to Structures server
            await Continuum.connect({
                host: 'localhost',
                port: 58503,
                connectHeaders: {
                    login: 'admin',
                    passcode: 'structures'
                }
            })

            // Use the generated service
            const personService = new PersonEntityService()

            // Create some dummy data
            const dummyPersons = [
                { firstName: 'John', lastName: 'Doe' },
                { firstName: 'Jane', lastName: 'Smith' },
                { firstName: 'Bob', lastName: 'Johnson' }
            ]

            // Create the persons in the database
            for (const person of dummyPersons) {
                await personService.create(person)
            }

            // Fetch all persons
            const allPersons = await personService.findAll()
            setPersons(allPersons)
        }

        init()
    }, [])

    return (
        <div>
            <h1>Persons</h1>
            <ul>
                {persons.map(person => (
                    <li key={person.id}>
                        {person.firstName} {person.lastName}
                    </li>
                ))}
            </ul>
        </div>
    )
}

export default App
```

### Adding Structures to an Existing Project

1. Install the Structures CLI globally:
```bash
pnpm install -g @mindignited/structures-cli
```

2. Initialize Structures in your project:
```bash
structures init --application your.application --entities path/to/entities --generated path/to/generated
```

3. Install the Structures API package:
```bash
pnpm install @mindignited/structures-api
```

4. Create your entity definitions in the specified entities directory (e.g., `src/entities/User.ts`):
```typescript
import { Entity, AutoGeneratedId, MultiTenancyType } from '@mindignited/structures-api'

@Entity(MultiTenancyType.SHARED)
export class User {
    @AutoGeneratedId
    public id: string | null = null
    public email: string = ''
    public name: string = ''
    public createdAt: Date = new Date()
}
```

5. **Sync your entities with the Structures server:**
   ```bash
   structures sync -p --server http://localhost:9090
   ```

6. **Connect to Continuum in your application:**

   For **React/Frontend** applications:
   ```typescript
   import { Continuum } from '@mindignited/structures-api'
   import { UserEntityService } from './generated/UserEntityService'

   // Initialize connection
   await Continuum.connect({
       host: 'localhost',
       port: 58503, // Continuum Stomp Port
       connectHeaders: {
           login: 'admin',
           passcode: 'structures'
       }
   })

   // Use generated services
   const userService = new UserEntityService()
   const users = await userService.findAll()
   ```

   For **Node.js/Backend** applications:
   ```typescript
   import { Continuum } from '@mindignited/structures-api'
   import { WebSocket } from 'ws'
   import { UserEntityService } from './generated/UserEntityService'

   // Required for Node.js environments
   Object.assign(global, { WebSocket })

   // Initialize connection
   await Continuum.connect({
       host: 'localhost',
       port: 58503, // Continuum Stomp Port
       connectHeaders: {
           login: 'admin',
           passcode: 'structures'
       }
   })

   // Use generated services
   const userService = new UserEntityService()
   const newUser = await userService.create({
       email: 'user@example.com',
       name: 'John Doe'
   })
   ```

7. **Verify your setup:**
   - Check the Structures GUI at [http://localhost:9090](http://localhost:9090)
   - Your entities should appear in the "Structures" section
   - Published entities will show a green "Published" status

## Understanding Entity Definitions

### Required Decorators
- `@Entity`: Marks a class as a Structures entity
- `@Id` or `@AutoGeneratedId`: Marks the ID field
  - `@AutoGeneratedId`: Server will generate IDs automatically
  - `@Id`: You must supply IDs when creating entities

### Example Entity with Common Decorators
```typescript
import { 
    Entity, 
    AutoGeneratedId, 
    MultiTenancyType,
    Precision,
    PrecisionType,
    NotIndexed
} from '@mindignited/structures-api'

@Entity(MultiTenancyType.SHARED)
export class Person {
    @AutoGeneratedId
    public id: string | null = null
    
    public firstName: string = ''
    public lastName: string = ''
    
    @Precision(PrecisionType.SHORT)
    public age?: number
    
    @NotIndexed
    public notes?: string
}
```

## Structures CLI Commands Reference

Here are the key CLI commands you'll use when working with Structures:

**Initialize a project:**
```bash
structures init --application your.app --entities src/entities --generated src/generated
```

**Sync entities with server (recommended):**
```bash
structures sync -p --server http://localhost:9090
```

**Other sync variations:**
- **Basic sync**: `structures sync --server http://localhost:9090` (without publishing)
- **Verbose sync**: `structures sync -p -v --server http://localhost:9090` (with detailed logging)
- **Dry run**: `structures sync --dryRun` (preview changes without applying)

**Generate services locally:**
```bash
structures generate
# or
structures gen -v
```

For more detailed information about CLI commands and options, see the [npm package readme](https://www.npmjs.com/package/@mindignited/structures-cli).

## Working with Migrations

Migrations allow you to evolve your schema and data over time. After setting up your project, you may need to modify your structures entities or migrate data.

### Creating Migrations

1. **Create a migrations directory** in your project root:
```bash
mkdir migrations
```

2. **Write migration files** using the versioned naming convention `V{number}__{description}.sql`:
```bash
# Example: migrations/V1__add_user_status_field.sql
```

3. **Use Structures SQL syntax** in your migration files:
```sql
-- migrations/V1__add_user_status_field.sql
ALTER TABLE users ADD COLUMN status KEYWORD;
UPDATE users SET status = 'active' WHERE active == true;
```

### Applying Migrations

Migrations are automatically applied when you run the sync command:
```bash
structures sync -p --server http://localhost:9090
```

The sync process will:
1. Sync your entity definitions
2. Apply any new migration files from the `./migrations` directory
3. Track which migrations have been applied to avoid re-running them

### Best Practices

- **Test migrations** in development before applying to production
- **Keep migrations focused** - group related changes together in a single migration
- **Never modify existing migration files** - create new ones instead
- **Use descriptive names** for your migration files
- **Review the [Writing Migrations](/guide/writing-migrations) guide** for detailed syntax and examples

## Next Steps
- Explore the [Decorators Reference](/reference/decorators) for available decorators and options
- Read the [Writing Migrations](/guide/writing-migrations) guide for detailed migration syntax and examples


